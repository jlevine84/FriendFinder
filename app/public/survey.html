<!DOCTYPE html>
<html>
    <head>
        <title>LFG Survey</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </head>
    <body>
        
        <div class="container" style="background-color: rgb(216, 216, 216)">
            
            <h1>Find your next party member, Adventurer!</h1>
            <hr>

            <h3>Enter your Name</h3>
            <input type="text" id="name" class="form-control" required>

            <h3>Enter your Class</h3>
            <input type="text" id="class" class="form-control" required>

            <h3>Tell us a bit more about character! (Optional)</h3>
            <input type="text" id="bio" class="form-control">
            <hr>

            <h3><strong>Scenario 1</strong></h3>
            <h5>You value your Martial Skills above Magical Powers</h5>
            <select class="chosen-select" id="q1">
              <option value=""></option>
              <option value="1">1 (I'm a master of the Arcane!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Fear my Axe, cur!)</option>
            </select>
            
        
            <h3><strong>Scenario 2</strong></h3>
            <h5>You encounter an Orc! You charge in and destroy it!</h5>
            <select class="chosen-select" id="q2">
              <option value=""></option>
              <option value="1">1 (Combat when needed but let's assess the situation first!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (See the foe. Kill the foe! Easy!)</option>
            </select>
        
        
            <h3><strong>Scenario 3</strong></h3>
            <h5>You encounter a Chest! Open it?</h5>
            <select class="chosen-select" id="q3">
              <option value=""></option>
              <option value="1">1 (No one leaves a chest lying around! IT'S A TRAP!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Crack that bad boy open! NOW!)</option>
            </select>
        
        
            <h3><strong>Scenario 4</strong></h3>
            <h5>You just completed a quest! What do you use your gold on?</h5>
            <select class="chosen-select" id="q4">
              <option value=""></option>
              <option value="1">1 (I save my gold for when it matters!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Ale!... More Ale!)</option>
            </select>
        
        
            <h3><strong>Scenario 5</strong></h3>
            <h5>When out of the dungeon you prefer a quiet place to unwind.</h5>
            <select class="chosen-select" id="q5">
              <option value=""></option>
              <option value="1">1 (Counting the seconds till the next dungeon crawl!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Ahhh. The easy life!)</option>
            </select>
        
        
            <h3><strong>Scenario 6</strong></h3>
            <h5>A Dragon! What is your next course of action?!</h5>
            <select class="chosen-select" id="q6">
              <option value=""></option>
              <option value="1">1 (Assess the situation and plan!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Axe? Check. Foe? Check. Dragon Horde? Here I come!)</option>
            </select>
        
        
            <h3><strong>Scenario 7</strong></h3>
            <h5>You've come to a room with a locked door and a puzzle cube.</h5>
            <select class="chosen-select" id="q7">
              <option value=""></option>
              <option value="1">1 (I love puzzles! Must have something to do with the lock...)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Puzzles and Locks? Bash the door down!)</option>
            </select>
        
            <h3><strong>Scenario 8</strong></h3>
            <h5>You are in the Duskwood Forest. What is your next course of action?</h5>
            <select class="chosen-select" id="q8">
              <option value=""></option>
              <option value="1">1 (Time for some scouting! Let's find out some more info!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Trees? Who cares?! Where's an foe to smash!)</option>
            </select>
        
            <h3><strong>Scenario 9</strong></h3>
            <h5>You've found a map!</h5>
            <select class="chosen-select" id="q9">
              <option value=""></option>
              <option value="1">1 (Cartography! I know how to get around and where to go!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Paper? Use it for kindling!)</option>
            </select>
        
            <h3><strong>Scenario 10</strong></h3>
            <h5>You are a master of the Arcane! An Axe? So uncivilized.</h5>
            <select class="chosen-select" id="q10">
              <option value=""></option>
              <option value="1">1 (My Axe is hungry and I'm a master chef!)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (I can't hear you with this Wizard Hat on!)</option>
            </select>
            <hr>
            <button type="submit" class="btn btn-primary btn-lg" id="submit">Submit</button>
            <hr>
            <a style="font-weight: bold" href="/api/list">LFG API </a> |
            <a style="font-weight: bold" href="https://github.com/jlevine84/">GitHub Repo</a>
        </div>

        <div class="modal" tabindex="-1" role="dialog" id="myModal">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Best Match Found!</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="font-weight: bold">
                  <p><strong>Thank you for using LFG Finder! Here are your results:</strong></p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

        <script>
          
          const resetValues = ()=> {
            $("#name").val(""),
            $("#class").val(""),
            $("#bio").val(""),
            $("#q1").val(""),
            $("#q2").val(""),
            $("#q3").val(""),
            $("#q4").val(""),
            $("#q5").val(""),
            $("#q6").val(""),
            $("#q7").val(""),
            $("#q8").val(""),
            $("#q9").val(""),
            $("#q10").val("")
          }

          $("#submit").on("click", (event)=> {

            event.preventDefault();

            let character = {
              name: $("#name").val().trim(),
              class: $("#class").val().trim(),
              bio: $("#bio").val().trim(),
              q1: $("#q1").val(),
              q2: $("#q2").val(),
              q3: $("#q3").val(),
              q4: $("#q4").val(),
              q5: $("#q5").val(),
              q6: $("#q6").val(),
              q7: $("#q7").val(),
              q8: $("#q8").val(),
              q9: $("#q9").val(),
              q10: $("#q10").val()
            }

            $.post("/api/list", character, (data)=> {
              console.log(data)
              let h5bestFit = $("<h5>").text("Best choice to round out your party!")
              let pname = $("<p>").text("Name: " + data[0].name)
              let pclass = $("<p>").text("Class: " + data[0].class)
              let pbio = $("<p>").text("Bio: " + data[0].bio)
              $(".modal-body").append(h5bestFit, pname, pclass, pbio)
              
              let h5mostLike = $("<h5>").text("Birds of a feather flock together! Here's your bird!")
              let pname2 = $("<p>").text("Name: " + data[1].name)
              let pclass2 = $("<p>").text("Class: " + data[1].class)
              let pbio2 = $("<p>").text("Bio: " + data[1].bio)
              $(".modal-body").append(h5mostLike, pname2, pclass2, pbio2)

              $("#myModal").modal("toggle")
              
              resetValues();
            })

          })
        </script>
    </body>
</html>